<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MIRA 0.2 | –°–∏—Å—Ç–µ–º–∞ –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ë–í–°</title>

  <!-- OpenLayers CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v7.4.0/ol.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <!-- jsPDF –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>

  <!-- HEADER -->
  <header class="header">
    <div class="header__logo">
      <div class="header__logo-icon">‚òÅÔ∏è</div>
      <span>MIRA 0.2 | –ù–µ–±–æ—Å–≤–æ–¥</span>
    </div>

    <div class="header__status">
      <span class="status-badge status-vfr" id="flight-status">
        <i class="fas fa-check-circle"></i>
        <span>–ì–û–¢–û–í –ö –ê–ù–ê–õ–ò–ó–£</span>
      </span>
      <span class="separator">|</span>
      <span>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: <strong id="header-coords">--</strong></span>
      <span class="separator">|</span>
      <span>–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <strong id="update-time">--:--</strong></span>
    </div>

    <div class="header__controls">
      <button class="btn btn-sm" id="btn-refresh">
        <i class="fas fa-sync-alt"></i>
        <span>–û–±–Ω–æ–≤–∏—Ç—å</span>
      </button>
      <button class="btn btn-sm" id="btn-auto-push">
        <i class="fas fa-cloud-upload-alt"></i>
        <span>–ê–≤—Ç–æ-–∑–∞–≥—Ä—É–∑–∫–∞</span>
      </button>
      <button class="btn btn-sm" id="btn-export">
        <i class="fas fa-download"></i>
        <span>–≠–∫—Å–ø–æ—Ä—Ç</span>
      </button>
      <button class="btn btn-sm btn-primary" id="btn-certify">
        <i class="fas fa-certificate"></i>
        <span>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</span>
      </button>
    </div>
  </header>

  <!-- MAIN -->
  <div class="main">

    <!-- LEFT MENU -->
    <aside class="left-menu">
      
      <div class="menu-section">
        <div class="menu-section__title">
          <i class="fas fa-compass"></i>
          –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
        </div>

        <div class="menu-item active" data-tab="tab-pnr">
          <span class="menu-item__icon">üìç</span>
          <span>–¢–æ—á–∫–∞ –Ω–µ–≤–æ–∑–≤—Ä–∞—Ç–∞</span>
        </div>
        <div class="menu-item" data-tab="tab-weather">
          <span class="menu-item__icon">üå§Ô∏è</span>
          <span>–ú–µ—Ç–µ–æ–∞–Ω–∞–ª–∏–∑</span>
        </div>
        <div class="menu-item" data-tab="tab-profiles">
          <span class="menu-item__icon">üìä</span>
          <span>–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏</span>
        </div>
        <div class="menu-item" data-tab="tab-windows">
          <span class="menu-item__icon">‚è∞</span>
          <span>–í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞</span>
        </div>
        <div class="menu-item" data-tab="tab-route">
          <span class="menu-item__icon">üõ§Ô∏è</span>
          <span>–ú–∞—Ä—à—Ä—É—Ç –∏ —Å–µ–≥–º–µ–Ω—Ç—ã</span>
        </div>
        <div class="menu-item" data-tab="tab-report">
          <span class="menu-item__icon">üìÑ</span>
          <span>–û—Ç—á—ë—Ç –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</span>
        </div>
      </div>

      <div class="menu-section">
        <div class="menu-section__title">
          <i class="fas fa-bolt"></i>
          –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        </div>
        <div class="menu-item" data-action="landing-zones">
          <span class="menu-item__icon">üöÅ</span>
          <span>–ó–æ–Ω—ã –ø–æ—Å–∞–¥–∫–∏</span>
        </div>
        <div class="menu-item" data-action="forecast-72h">
          <span class="menu-item__icon">üìà</span>
          <span>–ü—Ä–æ–≥–Ω–æ–∑ 72—á</span>
        </div>
        <div class="menu-item" data-action="flight-risks">
          <span class="menu-item__icon">‚ö†Ô∏è</span>
          <span>–†–∏—Å–∫–∏ –ø–æ–ª—ë—Ç–∞</span>
        </div>
        <div class="menu-item" data-action="flight-log">
          <span class="menu-item__icon">üìã</span>
          <span>–ñ—É—Ä–Ω–∞–ª –ø–æ–ª—ë—Ç–æ–≤</span>
        </div>
      </div>

      <div class="menu-section">
        <div class="menu-section__title">
          <i class="fas fa-cog"></i>
          –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∏—Å—Å–∏–∏
        </div>
        
        <div class="form-group" style="margin-bottom: 12px;">
          <label style="font-size: 11px; color: var(--text-secondary); text-transform: uppercase;">
            <i class="fas fa-map-marker-alt"></i> –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞)
          </label>
          <div style="display: flex; gap: 6px; margin-top: 6px;">
            <input type="number" id="input-lat" placeholder="55.75" value="55.30" step="0.0001" 
                   style="flex: 1; padding: 8px; border: 1px solid var(--border-color); border-radius: var(--radius); font-size: 13px;">
            <input type="number" id="input-lon" placeholder="37.62" value="66.60" step="0.0001"
                   style="flex: 1; padding: 8px; border: 1px solid var(--border-color); border-radius: var(--radius); font-size: 13px;">
          </div>
        </div>
        
        <button class="btn btn-sm btn-primary btn-block" id="btn-analyze" style="margin-bottom: 8px;">
          <i class="fas fa-search-location"></i>
          –ê–Ω–∞–ª–∏–∑
        </button>
        
        <div class="mission-info">
          <div class="info-row">
            <span class="label">–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É:</span>
            <span class="value" id="click-coords">--</span>
          </div>
          <div class="info-row">
            <span class="label">–í—ã—Å–æ—Ç–∞:</span>
            <span class="value" id="click-elevation">-- –º</span>
          </div>
          <div class="info-row">
            <span class="label">–î–∞—Ç–∞:</span>
            <span class="value" id="mission-date">13.02.2026</span>
          </div>
        </div>
        
        <button class="btn btn-sm btn-block" id="btn-edit-mission">
          <i class="fas fa-edit"></i>
          –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞—Ç—É
        </button>
      </div>

    </aside>

    <!-- MAP CONTAINER -->
    <div class="map-container">
      <div id="map"></div>

      <!-- Map overlay cards -->
      <div class="map-overlay">
        <div class="map-card">
          <div class="map-card__title">
            <i class="fas fa-wind"></i>
            –¢–µ–∫—É—â–∏–µ —É—Å–ª–æ–≤–∏—è
          </div>
          <div class="map-card__row">
            <span>–í–µ—Ç–µ—Ä 10–º:</span>
            <span class="map-card__value" id="overlay-wind-10m">-- –º/—Å</span>
          </div>
          <div class="map-card__row">
            <span>–í–µ—Ç–µ—Ä 500–º:</span>
            <span class="map-card__value" id="overlay-wind-500m">-- –º/—Å</span>
          </div>
          <div class="map-card__row">
            <span>–í–∏–¥–∏–º–æ—Å—Ç—å:</span>
            <span class="map-card__value" id="overlay-visibility">-- –∫–º</span>
          </div>
          <div class="map-card__row">
            <span>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</span>
            <span class="map-card__value" id="overlay-temp">--¬∞C</span>
          </div>
          <div class="map-card__row">
            <span>–û–±–ª–µ–¥–µ–Ω–µ–Ω–∏–µ:</span>
            <span class="status-pill status-ok" id="overlay-icing">--</span>
          </div>
        </div>

        <div class="map-card">
          <div class="map-card__title">
            <i class="fas fa-battery-three-quarters"></i>
            –¢–æ—á–∫–∞ –Ω–µ–≤–æ–∑–≤—Ä–∞—Ç–∞ (PNR)
          </div>
          <div class="map-card__row">
            <span>–ú–∞–∫—Å. –¥–∞–ª—å–Ω–æ—Å—Ç—å:</span>
            <span class="map-card__value" id="overlay-pnr-range">-- –∫–º</span>
          </div>
          <div class="map-card__row">
            <span>–í—Ä–µ–º—è –¥–æ PNR:</span>
            <span class="map-card__value" id="overlay-pnr-time">-- –º–∏–Ω</span>
          </div>
          <div class="map-card__row">
            <span>–†–µ–∑–µ—Ä–≤ –±–∞—Ç–∞—Ä–µ–∏:</span>
            <span class="map-card__value" id="overlay-battery">--%</span>
          </div>
        </div>
      </div>

      <!-- Map legend -->
      <div class="map-legend">
        <div class="map-legend__title">
          <i class="fas fa-layer-group"></i>
          –°–ª–æ–∏ –∫–∞—Ä—Ç—ã
        </div>
        
        <div class="legend-item">
          <label class="legend-toggle">
            <input type="checkbox" id="layer-route" checked>
            <span class="legend-color" style="background: #198754"></span>
            <span>–ú–∞—Ä—à—Ä—É—Ç</span>
          </label>
        </div>
        
        <div class="legend-item">
          <label class="legend-toggle">
            <input type="checkbox" id="layer-wind" checked>
            <span class="legend-color" style="background: #0dcaf0"></span>
            <span>–í–µ–∫—Ç–æ—Ä—ã –≤–µ—Ç—Ä–∞</span>
          </label>
        </div>
        
        <div class="legend-item">
          <label class="legend-toggle">
            <input type="checkbox" id="layer-risk" checked>
            <span class="legend-color" style="background: #ffc107"></span>
            <span>–ó–æ–Ω—ã —Ä–∏—Å–∫–∞</span>
          </label>
        </div>
        
        <div class="legend-item">
          <label class="legend-toggle">
            <input type="checkbox" id="layer-landing" checked>
            <span class="legend-color" style="background: #198754"></span>
            <span>–ó–æ–Ω—ã –ø–æ—Å–∞–¥–∫–∏</span>
          </label>
        </div>
        
        <div class="legend-item">
          <label class="legend-toggle">
            <input type="checkbox" id="layer-heatmap">
            <span class="legend-color" style="background: linear-gradient(45deg, #198754, #ffc107, #dc3545)"></span>
            <span>–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞</span>
          </label>
        </div>
        
        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-color);">
          <div class="map-legend__title">–£—Å–ª–æ–≤–Ω—ã–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è</div>
        </div>
        
        <div class="legend-item">
          <div class="legend-color" style="background: #0d6efd"></div>
          <span>–ê—ç—Ä–æ–¥—Ä–æ–º / –í–∑–ª—ë—Ç–Ω–∞—è —Ç–æ—á–∫–∞</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #0dcaf0"></div>
          <span>–ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #dc3545"></div>
          <span>–ó–æ–Ω–∞ –∑–∞–ø—Ä–µ—Ç–∞ –ø–æ–ª—ë—Ç–æ–≤</span>
        </div>
      </div>
    </div>

    <!-- RIGHT PANEL -->
    <aside class="right-panel" id="rightPanel">
      <div class="right-panel__header">
        <div class="right-panel__title" id="panel-title">
          <i class="fas fa-chart-line"></i>
          <span>–¢–æ—á–∫–∞ –Ω–µ–≤–æ–∑–≤—Ä–∞—Ç–∞</span>
        </div>
        <button class="right-panel__close" id="panel-close">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="right-panel__content" id="panel-content">
        <!-- Dynamic content will be injected here -->
      </div>
    </aside>

    <!-- Toggle button -->
    <button class="panel-toggle" id="panel-toggle">
      <span class="panel-toggle__icon">
        <i class="fas fa-chevron-right"></i>
      </span>
    </button>

  </div>

  <!-- OpenLayers JS -->
  <script src="https://cdn.jsdelivr.net/npm/ol@v7.4.0/dist/ol.js"></script>

  <!-- Application Scripts -->
  <script>
    // –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–∏—Å—Å–∏–∏ (–¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ CORS)
    window.MISSION_DATA = {
      mission: { name: '–ú–∏—Å—Å–∏—è ¬´–°–µ–≤–µ—Ä–Ω—ã–π¬ª', date: '2026-02-13' },
      coordinates: {
        start: { lat: 55.302107, lon: 66.598778, name: '–¢–æ—á–∫–∞ –≤–∑–ª—ë—Ç–∞' },
        route: [
          { lat: 55.294118, lon: 66.074007, name: '–ù–∞—á–∞–ª–æ –º–∞—Ä—à—Ä—É—Ç–∞', altitude: 500 },
          { lat: 55.275456, lon: 66.235891, name: '–ö–ü1', altitude: 600 },
          { lat: 55.268234, lon: 66.412567, name: '–ö–ü2', altitude: 750 },
          { lat: 55.256834, lon: 66.970183, name: '–ö–æ–Ω–µ—Ü –º–∞—Ä—à—Ä—É—Ç–∞', altitude: 500 }
        ],
        landingZones: [
          { lat: 55.285, lon: 66.150, name: '–ó–æ–Ω–∞ –ø–æ—Å–∞–¥–∫–∏ 1', radius: 500 },
          { lat: 55.270, lon: 66.420, name: '–ó–æ–Ω–∞ –ø–æ—Å–∞–¥–∫–∏ 2', radius: 500 },
          { lat: 55.260, lon: 66.850, name: '–ó–æ–Ω–∞ –ø–æ—Å–∞–¥–∫–∏ 3', radius: 500 }
        ],
        riskZones: [
          { lat: 55.280, lon: 66.300, radius: 2000, name: '–ó–æ–Ω–∞ —Ç—É—Ä–±—É–ª–µ–Ω—Ç–Ω–æ—Å—Ç–∏', level: 'moderate' },
          { lat: 55.265, lon: 66.700, radius: 1500, name: '–ó–æ–Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è', level: 'high' }
        ]
      },
      aerodrome: { name: '–°–µ–≤–µ—Ä–Ω—ã–π', icao: 'USKK', elevation: 195 },
      aircraft: { model: 'DJI M300 RTK', speed: 62, batteryCapacity: 25300, batteryMinutes: 55, consumptionRate: 177.3 },
      thresholds: { windGround: 10, windAltitude: 15, precipitation: 1.4, visibility: 5, tempDewpointDiff: 2 }
    };
  </script>
  <script src="js/api.js"></script>
  <script src="js/route.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/map.js"></script>
  <script src="js/tabs.js"></script>
  <script src="js/export.js"></script>
  <script src="js/app.js"></script>

</body>
</html>
